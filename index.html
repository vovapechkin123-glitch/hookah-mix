<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>THE MENU</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
:root { color-scheme: dark; }

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Arial;
  background: radial-gradient(1200px 800px at 30% 20%, #2b2b38 0%, #0b0b12 55%, #05050a 100%);
  color: #fff;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
}

.card {
  width: min(560px, 100%);
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 18px;
  padding: 22px;
  backdrop-filter: blur(10px);
  box-shadow: 0 20px 60px rgba(0,0,0,.45);
}

h1 { margin: 0 0 12px; font-size: 24px; }
p { opacity: .85; line-height: 1.5; }

.screen { display: none; }
.screen.active { display: block; }

.btn {
  width: 100%;
  margin-top: 18px;
  padding: 14px;
  border-radius: 14px;
  border: 0;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  background: linear-gradient(90deg, #ff7a18, #ff3d77);
  color: #fff;
}

.option {
  padding: 14px;
  border-radius: 14px;
  background: rgba(255,255,255,0.08);
  margin-top: 10px;
  cursor: pointer;
}

.option:hover { background: rgba(255,255,255,0.14); }

.timer { font-size: 28px; margin: 14px 0; text-align: center; }

.order {
  border-radius: 14px;
  background: rgba(255,255,255,0.08);
  padding: 14px;
  margin-top: 14px;
}

.small { font-size: 13px; opacity: .7; }
</style>
</head>

<body>
<div class="card">

<div class="screen active" id="s0">
  <h1>–ü—Ä–µ–∂–¥–µ —á–µ–º –º—ã –Ω–∞—á–Ω—ë–º.</h1>
  <p>
    –ó–¥–µ—Å—å —Ñ–∏–∫—Å–∏—Ä—É—é—Ç –º–æ–º–µ–Ω—Ç.<br><br>
    –í—ã –Ω–µ –≤—ã–±–∏—Ä–∞–µ—Ç–µ –≤–∫—É—Å.<br>
    –í—ã –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.
  </p>
  <button class="btn" onclick="go(1)">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
</div>

<div class="screen" id="s1">
  <h1>–¶–≤–µ—Ç.</h1>
  <div class="option" onclick="answer(1,'–°–∏–Ω–∏–π')">üîµ –°–∏–Ω–∏–π</div>
  <div class="option" onclick="answer(1,'–ö–æ—Ä–∏—á–Ω–µ–≤—ã–π')">üü§ –ö–æ—Ä–∏—á–Ω–µ–≤—ã–π</div>
  <div class="option" onclick="answer(1,'–ó–µ–ª—ë–Ω—ã–π')">üü¢ –ó–µ–ª—ë–Ω—ã–π</div>
  <div class="option" onclick="answer(1,'–§–∏–æ–ª–µ—Ç–æ–≤—ã–π')">üü£ –§–∏–æ–ª–µ—Ç–æ–≤—ã–π</div>
  <div class="option" onclick="answer(1,'–ë–µ–ª—ã–π')">‚ö™ –ë–µ–ª—ã–π</div>
</div>

<div class="screen" id="s2">
  <h1>–û—â—É—â–µ–Ω–∏–µ.</h1>
  <div class="option" onclick="answer(2,'–°—É—Ö–æ')">–°—É—Ö–æ</div>
  <div class="option" onclick="answer(2,'–ú—è–≥–∫–æ')">–ú—è–≥–∫–æ</div>
  <div class="option" onclick="answer(2,'–ü–ª–æ—Ç–Ω–æ')">–ü–ª–æ—Ç–Ω–æ</div>
  <div class="option" onclick="answer(2,'–ü—É—Å—Ç–æ')">–ü—É—Å—Ç–æ</div>
</div>

<div class="screen" id="s3">
  <h1>–ü–∞—É–∑–∞.</h1>
  <div class="option" onclick="answer(3,'–û—Ä–µ—Ö')">–û—Ä–µ—Ö</div>
  <div class="option" onclick="answer(3,'–§—Ä—É–∫—Ç')">–§—Ä—É–∫—Ç</div>
  <div class="option" onclick="answer(3,'–•–ª–µ–±')">–•–ª–µ–±</div>
  <div class="option" onclick="answer(3,'–ù–∏—á–µ–≥–æ')">–ù–∏—á–µ–≥–æ</div>
</div>

<div class="screen" id="s4">
  <h1>–°–∫–æ—Ä–æ—Å—Ç—å.</h1>
  <div class="option" onclick="answer(4,'–ú–µ–¥–ª–µ–Ω–Ω–æ')">–ú–µ–¥–ª–µ–Ω–Ω–æ</div>
  <div class="option" onclick="answer(4,'–†–æ–≤–Ω–æ')">–†–æ–≤–Ω–æ</div>
  <div class="option" onclick="answer(4,'–†—ã–≤–∫–∞–º–∏')">–†—ã–≤–∫–∞–º–∏</div>
  <div class="option" onclick="answer(4,'–ë–µ–∑ –≤—Ä–µ–º–µ–Ω–∏')">–ë–µ–∑ –≤—Ä–µ–º–µ–Ω–∏</div>
</div>

<div class="screen" id="s5">
  <h1>–°–≤–µ—Ç.</h1>
  <div class="option" onclick="answer(5,'–ü–æ–ª—É–º—Ä–∞–∫')">–ü–æ–ª—É–º—Ä–∞–∫</div>
  <div class="option" onclick="answer(5,'–¢–µ–Ω—å')">–¢–µ–Ω—å</div>
  <div class="option" onclick="answer(5,'–Ø—Ä–∫–∏–π')">–Ø—Ä–∫–∏–π</div>
  <div class="option" onclick="answer(5,'–ù–∏—á–µ–≥–æ')">–ù–∏—á–µ–≥–æ</div>
</div>

<div class="screen" id="s6">
  <h1>–≠—Ç–æ—Ç –º–æ–º–µ–Ω—Ç ‚Äî</h1>
  <div class="option" onclick="finish('–ù–∞—á–∞–ª–æ')">–ù–∞—á–∞–ª–æ</div>
  <div class="option" onclick="finish('–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ')">–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ</div>
  <div class="option" onclick="finish('–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ')">–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ</div>
</div>

<div class="screen" id="s7">
  <h1>–ó–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç.</h1>
  <p>–ö–∞–ª—å—è–Ω —É–∂–µ –≥–æ—Ç–æ–≤–∏—Ç—Å—è.</p>
  <div class="timer" id="guestTimer">25:00</div>
  <p class="small">–í—Ä–µ–º—è –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω–æ–µ.</p>
  <button class="btn" id="masterBtn" style="display:none" onclick="openMaster()">–ö–∞–±–∏–Ω–µ—Ç –º–∞—Å—Ç–µ—Ä–∞</button>
</div>

<div class="screen" id="master">
  <h1>–ó–∞–∫–∞–∑—ã</h1>
  <div id="orders"></div>
  <button class="btn" onclick="go(7)">–ù–∞–∑–∞–¥</button>
</div>

</div>

<script>
const MASTER_ID = 1292778768;
const DURATION = 25 * 60 * 1000;

const tgUser = Telegram.WebApp?.initDataUnsafe?.user;
const isMaster = tgUser && tgUser.id === MASTER_ID;
const guestName = tgUser?.first_name || "–ì–æ—Å—Ç—å";

let answers = {};
let orders = JSON.parse(localStorage.getItem("orders") || "[]");

function saveOrders() {
  localStorage.setItem("orders", JSON.stringify(orders));
}

function go(n) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(n === 'master' ? 'master' : 's' + n).classList.add('active');
}

function answer(q, v) {
  answers[q] = v;
  go(q + 1);
}

function finish(moment) {
  answers[6] = moment;
  const order = {
    id: Date.now(),
    guest: guestName,
    answers: {...answers},
    start: Date.now(),
    status: "–ì–æ—Ç–æ–≤–∏—Ç—Å—è"
  };
  orders.push(order);
  saveOrders();
  go(7);
  startGuestTimer(order.start);
  if (isMaster) document.getElementById("masterBtn").style.display = "block";
}

function startGuestTimer(start) {
  setInterval(() => {
    const diff = start + DURATION - Date.now();
    document.getElementById("guestTimer").textContent =
      diff <= 0 ? "–ì–æ—Ç–æ–≤–æ" :
      `${String(Math.floor(diff/60000)).padStart(2,'0')}:${String(Math.floor(diff%60000/1000)).padStart(2,'0')}`;
  }, 1000);
}

function openMaster() {
  const box = document.getElementById("orders");
  box.innerHTML = "";
  orders.forEach(o => {
    const diff = o.start + DURATION - Date.now();
    const time = diff <= 0 ? "–ì–æ—Ç–æ–≤–æ" :
      `${Math.floor(diff/60000)}:${String(Math.floor(diff%60000/1000)).padStart(2,'0')}`;
    box.innerHTML += `
      <div class="order">
        <b>${o.guest}</b> ¬∑ ${o.status}<br>
        <span class="small">–û—Å—Ç–∞–ª–æ—Å—å: ${time}</span><br><br>
        ${Object.values(o.answers).join(" ¬∑ ")}
      </div>
    `;
  });
  go('master');
}
</script>

</body>
</html>
