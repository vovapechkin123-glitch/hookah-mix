<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>THE MENU</title>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- CSS -->
  <link rel="stylesheet" href="./css/base.css">
  <link rel="stylesheet" href="./css/cabinet.css">
  <link rel="stylesheet" href="./css/course.css">
  <link rel="stylesheet" href="./css/waiting.css">
  <link rel="stylesheet" href="./css/master.css">
</head>

<body>
  <div class="card">

    <!-- Floating sound button (всегда доступна) -->
    <button class="soundFloating off" id="soundBtnFloating" title="Музыка">♪</button>

    <!-- Audio -->
    <audio id="bgMusic" src="./assets/7441574b62bac5e.mp3" loop preload="auto"></audio>

    <!-- ===================== SOUND GATE ===================== -->
    <div class="screen" id="soundGate">
      <div class="gateWrap" id="gateWrap">
        <div class="gateLogo gatePulse" id="gateLogo">
          <div class="ic">♪</div>
        </div>
        <h1 style="text-align:center;margin:0;">Включите зал.</h1>
        <p class="small" style="text-align:center;margin:0;">
          Нажмите на знак.<br>
          Дальше — без лишних слов.
        </p>
      </div>
    </div>

    <!-- ===================== WELCOME / ПРОЛОГ ===================== -->
    <div class="screen" id="welcome">
      <h1>Прежде чем мы начнём.</h1>
      <p>
        Здесь не подбирают вкус.<br><br>
        Здесь фиксируют момент.<br><br>
        То, что вы получите,<br>
        не существует заранее.
      </p>

      <div class="glowLine"></div>

      <button class="btn primary" id="btnWelcomeStart">Продолжить</button>
    </div>

    <!-- ===================== DOOR (GEO) ===================== -->
    <div class="screen" id="door">
      <h1>Открыть дверь.</h1>
      <p class="small">
        Это вход не в заказ.<br>
        Это вход в процесс.
      </p>

      <button class="btn primary" id="btnDoor">Открыть</button>
      <button class="btn" id="btnDoorBot">Я не могу дать гео</button>
    </div>

    <!-- ===================== OUTSIDE ===================== -->
    <div class="screen" id="outside">
      <h1>Снаружи.</h1>
      <p class="small">
        Сейчас это место не совпадает с залом.<br>
        Вернитесь — и повторите.
      </p>

      <div class="btnRow">
        <button class="btn primary" id="btnOutsideRetry">Проверить снова</button>
        <button class="btn" id="btnOutsideBack">Назад</button>
      </div>
    </div>

    <!-- ===================== NO PERMISSION ===================== -->
    <div class="screen" id="no-permission">
      <h1>Дверь закрыта.</h1>
      <p class="small">
        Без разрешения на геолокацию<br>
        зал не открывается.
      </p>

      <div class="btnRow">
        <button class="btn primary" id="btnNoPermRetry">Попробовать снова</button>
        <button class="btn" id="btnNoPermBack">Назад</button>
      </div>
    </div>

    <!-- ===================== GEO ERROR ===================== -->
    <div class="screen" id="geo-error">
      <h1>Тишина.</h1>
      <p class="small">
        Устройство молчит.<br>
        Сегодня — без этого.
      </p>

      <div class="btnRow">
        <button class="btn primary" id="btnGeoErrRetry">Ещё раз</button>
        <button class="btn" id="btnGeoErrBot">Отправить гео в Telegram</button>
      </div>

      <button class="btn" id="btnGeoErrBack">Назад</button>
    </div>

    <!-- ===================== CABINET (ГОСТЬ) ===================== -->
    <div class="screen" id="cabinet">
      <div class="profileTop">
        <div>
          <div class="profileName" id="cabinetName">Гость</div>
          <div class="profileMeta" id="cabinetMeta">Сеансов: 0 · Оценок: 0</div>
        </div>

        <!-- маленькая inline кнопка звука (опционально) -->
        <button class="soundFloating off" id="soundBtnInline" title="Музыка">♪</button>
      </div>

      <div class="panel soft">
        <div class="row">
          <div>
            <b>Сейчас</b><br>
            <span class="small">Процесс уже начался. Не вмешивайтесь.</span>
          </div>
          <span class="pill brass" id="cabinetNowStatus">…</span>
        </div>

        <button class="btn" id="btnBackToWaiting">Вернуться</button>
      </div>

      <div class="sectionTitle">Последние моменты</div>
      <div id="cabinetMoments"></div>

      <div class="btnRow">
        <button class="btn" id="btnArchive">Архив</button>
        <button class="btn primary" id="btnNewMoment">Новый момент</button>
      </div>

      <div class="sectionTitle">Знаки</div>
      <div class="achGrid" id="cabinetAchievements"></div>
    </div>

    <!-- ===================== ARCHIVE ===================== -->
    <div class="screen" id="archive">
      <div class="row">
        <h1 style="margin:0">Архив</h1>
        <span class="badge" id="archiveCount">…</span>
      </div>

      <p class="small">Здесь лежат моменты, которые уже случились.</p>

      <div id="archiveList"></div>

      <button class="btn" id="btnArchiveBack">Назад</button>
    </div>

    <!-- ===================== MOMENT VIEW ===================== -->
    <div class="screen" id="moment">
      <h1 id="momentTitle">Момент</h1>
      <p class="small" id="momentTime"></p>

      <div class="panel" id="momentAnswers"></div>

      <div class="panel soft">
        <b>Оценка</b>
        <p class="small">Не вкус. Не табак. Результат момента.</p>

        <div class="btnRow">
          <button class="btn" id="rateBad">Слабо</button>
          <button class="btn" id="rateOk">Хорошо</button>
          <button class="btn primary" id="ratePerfect">Идеально</button>
        </div>

        <button class="btn" id="btnTip">Оставить жест</button>
      </div>

      <button class="btn" id="btnMomentBack">Назад</button>
    </div>

    <!-- ===================== COURSE / QUESTIONS ===================== -->
    <div class="screen" id="course">
      <h1 class="courseTitle" id="courseTitle">Не думайте долго.</h1>
      <p class="courseSub" id="courseText">К какому цвету тянется рука сейчас?</p>

      <div id="courseOptions"></div>

      <button class="btn" id="btnCourseBack">Назад</button>
    </div>

    <!-- ===================== WAITING ===================== -->
    <div class="screen" id="waiting">
      <h1 class="waitTitle" id="waitTitle">Процесс начался.</h1>
      <p class="waitText" id="waitText">Не торопите момент.</p>

      <div class="hourglass">
        <div class="sandTop" id="sandTop"></div>
        <div class="sandStream"></div>
        <div class="sandBottom" id="sandBottom"></div>
      </div>

      <div class="timer" id="guestTimer">25:00</div>
      <p class="waitHint" id="guestHint"></p>

      <button class="btn" id="btnWaitingToCabinet">В кабинет</button>
    </div>

    <!-- ===================== EPILOGUE ===================== -->
    <div class="screen" id="epilogue">
      <h1>Это было сделано</h1>
      <p>
        именно для этого момента.<br><br>
        Дальше — без интерфейса.
      </p>

      <button class="btn" id="btnEpilogueToCabinet">В кабинет</button>
    </div>

    <!-- ===================== MASTER ===================== -->
    <div class="screen" id="master">
      <div class="row">
        <div>
          <div class="kitchenTitle">Кухня</div>
          <div class="kitchenSub">Здесь не “заказы”. Здесь — моменты.</div>
        </div>
        <span class="badge" id="masterStatus">…</span>
      </div>

      <div id="masterList"></div>

      <button class="btn" id="btnMasterRefresh">Обновить</button>
    </div>

  </div>

  <!-- JS -->
  <script type="module" src="./js/app.js"></script>
</body>
</html>